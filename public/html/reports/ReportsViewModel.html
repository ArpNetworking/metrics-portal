<!--
  ~ Copyright 2018 Dropbox, Inc.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="container-fluid">
    <div class="row">
        <div class="container col-md-offset-1 col-md-10">
            <h2>Reports</h2>
            <div class ="row">
                <div class="col-md-1"><a href="#report/edit" class="btn btn-default" style="margin-bottom: .5em">New Report</a></div>
                <div class="col-md-offset-7 col-md-4">
                    <form role="form" class="form-inline">
                        <div class="form-group has-feedback pull-right">
                            <input class="form-control" data-bind="value: reports.searchExpression, valueUpdate: 'keyup'" type="text" placeholder="Search">
                            <span class="glyphicon glyphicon-search form-control-feedback"></span>
                        </div>
                    </form>
                </div>
            </div>
            <table class="table table-hover">
                <tr class="row">
                    <th class="col-md-3">ID</th>
                    <th class="col-md-1">Name</td>
                    <th class="col-md-1">Source</td>
                    <th class="col-md-1">Schedule Type</td>
                    <th class="col-md-2">Start Time</td>
                    <th class="col-md-2">End Time</td>
                    <th class="col-md-2">Recipients</td>
                    <th></th>
                </tr>
                <!-- ko foreach: reports.filteredEntities -->
                <tr class="row">
                    <td data-bind="text: id"></td>
                    <td data-bind="text: name"></td>
                    <td>
                        <span data-bind="text: source.title"></span>
                        <div class="popover-content hidden" data-bind="attr: {'data-id': 'source-'+id}">
                            <dl class="container col-md-12 dl-horizontal">
                                <dt>url:</dt><dd data-bind="text: source.url"></dd>
                                <dt>event:</dt><dd data-bind="text: source.eventName"></dd>
                                <dt>ignore cert errors:</dt><dd data-bind="text: source.ignoreCertificateErrors"></dd>
                            </dl>
                        </div>
                        <span class="glyphicon glyphicon-info-sign"
                              data-title="Source details"
                              data-html="true"
                              data-bind="popover: {id: 'source-'+id}"
                              data-trigger="hover"></span>
                    </td>
                    <td>
                        <span data-bind="text: schedule.displayType"></span>
                    </td>
                    <td>
                        <span data-bind="text: schedule.startText"></span>
                    </td>
                    <td>
                        <span data-bind="text: schedule.endText"></span>
                    </td>
                    <td data-bind="foreach: recipients">
                        <span class="badge" data-bind="text: badgeText"></span>
                    </td>
                    <td>
                        <a data-bind="attr: { href: editUri }">
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                    </td>
                </tr>
                <!-- /ko -->
            </table>
            <nav class="navbar navbar-inverse navbar-fixed-bottom col-md-12 footer">
                <div class="text-center">
                    <ul class="pagination" data-bind="foreach: reports.pagerElements">
                        <li data-bind="css: {active: active, disabled: disabled}"><a href="#" data-bind="text: name, click: $parent.gotoPage"></a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
</div>
