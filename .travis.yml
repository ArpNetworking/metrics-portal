cache:
  directories:
  - "$HOME/.ivy2"
  - "$HOME/.m2"
  - "$HOME/.jdk"
sudo: false
services:
- docker
addons:
  apt:
    packages:
    - rpm
env:
  global:
  - TARGET=install
  - secure: e6lLmZ/JzhAr2zsFbahiMLeW7HsVFY6pPw/zhoUKWP8r6fH1+YXiJ2KQiQMzEYkJ0qp98x1PXLAMQvLNJzo8uBmJ7cUZZIfOxV7cSuAQdLeTJbZUbnKJ56LDVarSN/xciOGDCDRsERCOjX3Yg8uhQR0eIJXG6c+w2lBDCT0VHN7CepbfTA3CxCdFG8LM7Rq5V/yLKB+8ymF+JNKoj/yY/AbP1d/Oo1rcxSdR5Z28GPq9dTt8EfYbhWLf78j92qj/Gu8ujOwZrGN+4WxbIc3pRT4S62dBqhzaO2/VXhFaIFgjKsDR3m3m1PHLER1hDY5CuhJyvMf9wItE254cBedBQtVKoEe28jUmLcFIJug/uhZ41vmiEBpCN2D/MLKSVF6Dri4y6Yrz8Qfkjanh9bWN0d5alVxP5iIixvH7if9NKLX/2ANArxx2ntacx1jg0mYqKzJELKrwqTinEPH5zw5cM27cwzq3kDD7dn/lBaQHDDe9FioqyM3hGIbK4W5F9YIZs/o/pf8ncunII+MNJNLxA7touSKoxPDK1W0wMhB3pnxnq+tteyMvpKlh0KFWeQptglq21Zi0vFB88cWiz1w2682LbJ0bfA/NQR+45RODmqMi4T6BBxnVdmyjlykhVlyrqmtGN26Dcw/20dhZcqr1FvLdQa3sI0A9CEY/jhq5Gls=
  - secure: VUOZR3nnFyUd5Rgex0+BIF48lLaDZHMKtwXQZxbw0n/FCXrMnbIGWrOftNCCsppu8P4+LyIckXsZ6k4NilScyLIgjdN/DMKJPkq9MRkxscvjIYcfHsNYaeNycwNrYZ8qj929ClxJ8iYIpFvPN1XArlbGFHiCucsyjUO30t6d2YlhA7Iwlje6Us4lIt6JlRP6LYgPgXge/0+GQBoIvsZUyGg7MBkQcd7WsVA+vwYdMEriEnH2+XuDxCGDEe7CgY8674R3TfUSmi9BfCCMl10rHryoTu6E/Wi/n1+a8Hj+YPzgQ5jwAITil+BA90OafieIy08c1nGvwVOenWK4v1lTT5x37hK7rr03ETzA1FIKtwK/G9UltCuP9/K/s9jnoPIJbPG5Bs/9LVKFwLMPFheTzFt05hYIqAhqfJj96ZvLTigCZNnxjao7/KM3E+knvyJDrVf37X/SMl0L6wxb03UX1lRVi5XxSubGpmR7KQKivU+D5+LR3w511TYMHEDcNhyOvx9Mnlk2RwHzI3/vDa3Cmxa26i9kkZTqegY9hdhrrFyONz8VgO1JYmoqrpEe/dffa/U1r0rWNCGqQGujbJRpC9zsVv9KS5E8BOrCCzuvIGR86651ZdR2eLkAfyoVHrhAgqXce9wGMrbVUk33tgozTIAwhOqCbB+6oqZaBYyPNyQ=
  - secure: m2RsbL4XLT1gSpyivs/YY6SGAxaK7buVtTeOHHhAwgLphpUgIBLOAxECUX1rl+IKd0+o6AHQCPySqfxbGtyw5pgeBPUwGW1Th8jJ/ZUzJuWDfoWVzUy8FxdG+55DNnhoLSWyxrIaLrfHG7J0nPtL5XBYCCbkQs8MXbCSNJA2oJC/Wdqi7QB4AJwmmcvAvcuMUOtsMS0ihn5k8TS601rj6v10xx8o6xADNz2uZhrdTplAcgsuwdnJBOt1QoIa9YW+SwOiFpzPJX9ZLVUI+9AGTwggWVc7pl/le+9P1IICrPk/dNCWy/Zb6iwHPjRDOkv2Hd5tgmLkN3xBNA5E3ZcGuiB9e0nFdAOqZXQmAsxc3psR9DZNi/YQkN1ljuqMkVJMIUqfLYvXel0UvyciYGJQncOTSHRnblVFpNCDmU7ytl+2DWt9aA8nKkNzma95pPTTTrwzQ94e9CWaiJ3M7L97NvlOiKSt2fhYPTUca2sfbri3qF5SyMAde2jPttzT5wi87d3GxWrEmXsyzEUcTQoqfBijOTRyGJ01o4x9Mxo82MaBoPvJYhxUZkclemAy5zCrpj5lINlYjB7wWhQv9YzMlvEkTbm2WcQKxpdRSAuoIunMnCP/JmIf4oAciLU5yzKFdu/Kq1E3wmugo80V5tPGcAJyucMfEfTUFx6dbT6paJA=
  - secure: VIMoqaHcdy95V0czqWjrIy7igGUxevBk6UbFXRpIN81pil1MkIYdFMwAW4oHkYeJjt4RhLt92fsvAGcAtOTop3Hv2q8Hio/zZoUvpGch3vXICQxwngDhO1LLcp8NpTZmlNbsM5oqLwmjjK6aoriHXsLEKeNC5zWG3npo3K8kVMqgmEBqQJdP+BO7NM6oJm/xgAZOdKDTjUa81fG+S9Cok4p3tmbemHfcyE9Sx7MFiirxG4PXT6CQIQgfVrnACAkvABu+k0QLnN2LknuYrkcYO2urkJyGjraSIiH2LzoGYe7JwLHgM39BtpahvfJgrKq1EsGFL1EQW/8nN7moM+ir7nVcCztYHhoOgfoPnuD9Be4zgsUpkcc3/eo82t63fRljlGKxJ6sUZ8ezI1HBSRyOrMNjeED/wd64FsTgatGiMDq8wFvFugm69RPvJsDERE+r6IFSOOf/X46EUv2LG7VavdS+5GtXwi8LFj0b3rOf0WP+BxWytTKWBXj8/U5mfMjLYwH93cNAHwX+Y7u3n5RIQ/FBUHzf9n9DrfWshZXvwCdppR2C31ntG6nrPPH8OpVODd2xenn9xrYcdvXH4kgUA5C9NGzwa5H3/w7/10ZE/7FGMKWlyhb7LsiD0s7gcoZB3tK+VwpKRg1OUW0MlEtzKNFmlKBio1olYr7pF/TcU3k=
  - secure: Xp/K9POpuuIi+3nCtmkXH9H4tmV+RT0SRiCS7QoZ/Ob0TneGhVXMj6c6NPecfJshvzZ5Y5LAPxLTGwAJt8xpP/wjzGupUL+6zFyRjeVzU12Ky3BPokJrwUn1K6/fEt1fxCC7TYCyyFxoROvivN8L8K0ML9elQcLBqEfxiQaBVxolf0KH8wVZUEQtzva6pRcjxFoKu19Jytcjjn8qDmD0pmuzBT10w+EgvzGMa65mwMxYW1H7nPh1HpAkYbt5oNo8mkF+kkH2sRq4Z2L2utSBwGAJUxCUILhSZE7IWG8KqYcm7V/szFymMWzJDN0O5SC2yxkdjiUGDXbW5ux5+pXtcOPEK5868bVAfEytZJjjOuwEjqCpcBGMd8H+PDZ5vdcyO9aZeP1u+oFBoDkV0zboiZaJA+PPYXtBmlvFC7uf8ww78ZJRLwHTn8aYcIwHpdHbfDIMu9KbJO4/SqnB2+enyTSQriBNcILXS9QvuvsioFxlJbrWeHZYkm5beQimUU+BDM/ouwkrmrGe5AU8YsVnbM4ltCR1DtFVCkpWlYB6egC16F0fojh/H6Kvj3K/Pqlt5IbrFd6pIV2ZiPBxJIxIcE819stlilunRz0WR7oixzLjaEZG7zhWmgbsXo5RZSPme706zaebw5wKPSGznOx6AV0w34doE/juG3OBeilBHQY=
install: true
before_script:
- gpg --import arpnetworking.key
- if [ \( -n "${TRAVIS_TAG}" \) -a  "${TRAVIS_PULL_REQUEST}" = "false" ]; then export
  TARGET="deploy -P release --settings settings.xml"; fi;
script:
- "./jdk-wrapper.sh ./mvnw clean ${TARGET} -P rpm -U -B -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn"
deploy:
  provider: releases
  api_key:
    secure: ito0EyboA21JDfWTeuLZhehnryafj1AYLjNFv/jsFBcTRnyDpQF7hkuTqY34bokYUXS8USYOlSymomN6EYEwFPygBb3cdouK+dz067fCnoBZDO2YNu+xXTAfc9nY3imyQqXz5aJsGXmu09k9vWfDtukWSO3+/uwatmXuo5NalOGwhGzD/IQSylpAg5hifCBOzvcKC0PBnaNE0DfaF/lTMDSx5bjMtC92SntvK8RPWowCriv0wN8fSUSjjM3BZ/x8vYcgn5WnmqI1tyxsnN+x5+V7nFZil++J09UKIctr+wOg8QtOFNn+QZlo+8mMe6ML6Wvja9rlTIhuEmtZ2/zoNkhx9p0OCyUcvkram3GakwSy70zS7r4pbvyq8QyQA1yekkQ49lAmrbZZRNovtNsAP3NlF9pFYRzU1mb1Jc5XwnT4czCkj4t+BSS6zHgGDBcfJqUzfYoeJt3Vl4SwBROP1GghQi7gOUf2e5NkH9CVZs8XpVmwGm8rKnLtcdpYwKQxh+0EgCQVchknyFgOO3i7B/mdb8IfszieK9cs0EkRig5Irr+N1rFJTuiTfs2iU/0h2CSUZMEG3boWvPI6an+LTkGOzImognnjNYL2ODttan88LPre0sMR1cfQcTug2n9OEgAqmN4wzIWVjivIA/BJSPKTjFm0HRfUYp5P+tzFteo=
  file:
  - target/rpm/metrics-portal/RPMS/noarch/metrics-portal*.rpm
  - target/metrics-portal-*-bin.tgz
  file_glob: true
  skip_cleanup: true
  on:
    repo: ArpNetworking/metrics-portal
    tags: true
